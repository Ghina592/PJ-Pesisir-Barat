<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Pesisir Barat — Detail Wisata</title>

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />

    <!-- Styles -->
      <link rel="stylesheet" href="header.css" />
    <link rel="stylesheet" href="pariwisata-sub.css" />
    
        <link rel="stylesheet" href="footer.css" />
        <link rel="stylesheet" href="mobile.css" />
    
    <!-- meta for theme-color -->
    <meta name="theme-color" content="#e9caa2" />
  </head>
  <body>
    <!-- TOP BAR / HERO -->
    <header class="hero">
      <div class="hero-overlay"></div>

      <div class="hero-top container">
        <!-- Welcome Text (Center) -->
        <div class="hero-content">
          <h1 class="hero-title">SELAMAT DATANG DI WEBSITE RESMI</h1>
          <h2 class="hero-subtitle">KABUPATEN PESISIR BARAT</h2>
        </div>

        <div class="hero-bottom">
          <div class="official left-official">
            <img
              src="assets/img/bupati.png"
              alt="bupati"
              class="official-photo"
            />
          </div>

          <div class="hero-center">
            <img src="assets/img/logo.png" alt="logo" class="logo-center" onclick="window.location.href='index.html'" style="cursor: pointer;" />
            <h1>NEGERI PARA SAI BATIN DAN ULAMA</h1>

            <div class="search">
              <input type="search" placeholder="Search..." id="searchInput" />
              <button id="searchBtn" aria-label="search">🔍</button>
            </div>
          </div>

          <div class="official right-official">
            <img
              src="assets/img/wakil.png"
              alt="wakil"
              class="official-photo"
            />
          </div>
        </div>
      </div>

      <!-- HAMBURGER (MOBILE ONLY) -->
      <div class="hamburger" id="hamburgerBtn">☰</div>

      <!-- NAVIGATION -->
       <nav class="main-nav">
        <div class="nav-item" onclick="window.location.href='wisata-alam.html'">
          WISATA ALAM
        </div>
        <div class="nav-item" onclick="window.location.href='wisata-budaya.html'">
          WISATA BUDAYA
        </div>
        <div class="nav-item" onclick="window.location.href='wisata-kuliner.html'">
          WISATA KULINER
        </div>
      </nav>
    </header>

    <!-- MAIN CONTENT -->
    <main>
      <!-- Breadcrumb -->
      <nav class="breadcrumb container">
        <a href="index.html">BERANDA</a> &gt; 
        <a href="pariwisata.html">PARIWISATA</a> &gt; 
        <a href="#" id="breadcrumbKategori">WISATA</a> &gt; 
        <span id="breadcrumbNama">Loading...</span>
      </nav>

        <div class="detail-container" id="wisataDetail">
            <!-- Content will be loaded dynamically -->
            <p>Loading...</p>
        </div>
    </main>

        <!-- FOOTER -->
    <div id="footer-placeholder"></div>

    <!-- Scripts -->
    <script src="script.js"></script>
    <script src="footer-template.js"></script>

    <script src="script.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', async function() {
        const id = getUrlParam('id');
        if (!id) {
          document.getElementById('wisataDetail').innerHTML = '<p>ID wisata tidak ditemukan.</p>';
          return;
        }

        const wisata = await DataManager.getById('wisata', id);
        if (!wisata) {
          document.getElementById('wisataDetail').innerHTML = '<p>Wisata tidak ditemukan.</p>';
          return;
        }

        // Update breadcrumb dynamically
        const kategoriMap = {
          'wisata-alam': { text: 'WISATA ALAM', href: 'wisata-alam.html' },
          'wisata-budaya': { text: 'WISATA BUDAYA', href: 'wisata-budaya.html' },
          'wisata-kuliner': { text: 'WISATA KULINER', href: 'wisata-kuliner.html' }
        };
        const kategori = kategoriMap[wisata.kategori] || { text: 'WISATA', href: 'pariwisata.html' };
        document.getElementById('breadcrumbKategori').textContent = kategori.text;
        document.getElementById('breadcrumbKategori').href = kategori.href;
        document.getElementById('breadcrumbNama').textContent = wisata.nama.toUpperCase();

        // Build cost list HTML
        let costHtml = '';
        if (wisata.estimasiBiaya) {
          costHtml = '<ul>';
          for (const [key, value] of Object.entries(wisata.estimasiBiaya)) {
            if (key !== 'total') {
              costHtml += `<li><strong>${key}:</strong> ${value}</li>`;
            }
          }
          costHtml += '</ul>';
          if (wisata.estimasiBiaya.total) {
            costHtml += `<p><strong>Total estimasi:</strong> ${wisata.estimasiBiaya.total}</p>`;
          }
        }

        // Build gallery with carousel controls like homepage events
        const allImages = [wisata.gambarHero, ...(wisata.galeri || [])].filter(Boolean);
        let galleryHtml = '';
        if (allImages.length > 0) {
          galleryHtml = `
            <div class="gallery-section" style="margin: 30px 0;">
              <h3 style="margin-bottom: 15px; color: #0c4a6e; font-weight: bold;">Galeri</h3>
              <div class="carousel-wrapper" style="position: relative;">
                <button class="carousel-btn btn-prev" onclick="scrollGallery(-1)" aria-label="Sebelumnya" style="position: absolute; left: -15px; top: 50%; transform: translateY(-50%); z-index: 10; background: #1b88c9; border: none; padding: 12px 16px; border-radius: 50%; cursor: pointer; font-size: 18px; color: white;">&lsaquo;</button>
                <div class="gallery-track" id="galleryTrack" style="display: flex; overflow-x: auto; scroll-snap-type: x mandatory; scroll-behavior: smooth; gap: 15px; padding: 10px 0; scrollbar-width: none; -ms-overflow-style: none;">
                  ${allImages.map((img, i) => `
                    <div class="gallery-thumb" style="flex: 0 0 280px; scroll-snap-align: start; cursor: pointer;" onclick="window.gallery && window.gallery.open(${JSON.stringify(allImages)}, ${i})">
                      <img src="${img}" alt="Gallery ${i+1}" style="width: 280px; height: 200px; object-fit: cover; border-radius: 12px; border: 3px solid #0c4a6e;" />
                    </div>
                  `).join('')}
                </div>
                <button class="carousel-btn btn-next" onclick="scrollGallery(1)" aria-label="Berikutnya" style="position: absolute; right: -15px; top: 50%; transform: translateY(-50%); z-index: 10; background: #1b88c9; border: none; padding: 12px 16px; border-radius: 50%; cursor: pointer; font-size: 18px; color: white;">&rsaquo;</button>
              </div>
            </div>
          `;
        }

        // Render content - cleaner layout like original
        document.getElementById('wisataDetail').innerHTML = `
          <div style="overflow: hidden; border-radius: 16px; margin-bottom: 25px;">
            <img src="${wisata.gambarHero}" alt="${wisata.nama}" class="detail-hero-img" style="width: 100%; height: clamp(300px, 50vw, 500px); object-fit: cover; display: block;" />
          </div>
          
          <div class="detail-title" style="font-size: clamp(22px, 5vw, 36px); font-weight: bold; color: #000; text-align: center; margin-bottom: 12px; text-transform: uppercase; line-height: 1.2;">${wisata.nama}</div>
          
          <div class="detail-ringkasan" style="font-style: italic; text-align: center; color: #000; margin-bottom: 30px; font-size: clamp(14px, 3vw, 18px); font-weight: 600; line-height: 1.5; padding: 0 10px;">
            ${wisata.ringkasan}
          </div>

          <div class="detail-desc" style="line-height: 1.9; margin-bottom: 35px; font-size: clamp(14px, 2.5vw, 17px); color: #333; text-align: justify;">
            ${wisata.deskripsi.replace(/\\n\\n/g, '</p><p style="margin-bottom: 18px;">')}
          </div>

          ${galleryHtml}

          <div class="detail-info" style="background: #f9e4c7; padding: clamp(15px, 4vw, 30px); border-radius: 12px; margin-top: 25px; border: 2px solid #333; max-width: 100%;">
            <h3 style="color: #0c4a6e; margin-bottom: 18px; font-weight: bold; font-size: clamp(16px, 3vw, 20px);">Estimasi Biaya</h3>
            ${costHtml}
            
            <h3 style="color: #0c4a6e; margin-top: 30px; margin-bottom: 18px; font-weight: bold; font-size: clamp(16px, 3vw, 20px);">Kontak</h3>
            <p style="margin-bottom: 12px; display: flex; align-items: center; flex-wrap: wrap;">
              <img src="assets/instagram.png" alt="Instagram" style="width: 24px; height: 24px; margin-right: 12px;" />
              <a href="${wisata.kontak?.instagramUrl || '#'}" target="_blank" style="color: #0c4a6e; text-decoration: none; font-weight: 500;">
                ${wisata.kontak?.instagram || '-'}
              </a>
            </p>
            <p style="margin-bottom: 12px; display: flex; align-items: center; flex-wrap: wrap;">
              <img src="assets/icons/wa.png" alt="WhatsApp" style="width: 24px; height: 24px; margin-right: 12px;" />
              <a href="${wisata.kontak?.whatsappUrl || 'https://wa.me/' + (wisata.kontak?.whatsapp || '').replace(/[^0-9]/g, '')}" target="_blank" style="color: #0c4a6e; text-decoration: none; font-weight: 500;">
                ${wisata.kontak?.whatsapp || '-'}
              </a>
            </p>
            
            <h3 style="color: #0c4a6e; margin-top: 30px; margin-bottom: 18px; font-weight: bold; font-size: clamp(16px, 3vw, 20px);">Lokasi</h3>
            <p>
              <a href="${wisata.lokasi}" target="_blank" style="display: inline-block; background: #0c4a6e; color: white; padding: 12px 24px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: clamp(13px, 2.5vw, 16px);">
                📍 Buka di Google Maps
              </a>
            </p>
          </div>
        `;

        // Update page title
        document.title = `${wisata.nama} - Pesisir Barat`;
      });

      // Hamburger menu
      const hamburger = document.getElementById("hamburgerBtn");
      const mainNav = document.querySelector(".main-nav");
      if (hamburger && mainNav) {
        hamburger.addEventListener("click", () => {
          mainNav.classList.toggle("open");
        });
      }

      // Gallery scroll function for carousel buttons with infinite loop
      function scrollGallery(direction) {
        const track = document.getElementById('galleryTrack');
        if (track) {
          const scrollAmount = 300;
          const maxScroll = track.scrollWidth - track.clientWidth;
          
          if (direction > 0) {
            // Scrolling right - if at end, go to start
            if (track.scrollLeft >= maxScroll - 10) {
              track.scrollTo({ left: 0, behavior: 'smooth' });
            } else {
              track.scrollBy({ left: scrollAmount, behavior: 'smooth' });
            }
          } else {
            // Scrolling left - if at start, go to end
            if (track.scrollLeft <= 10) {
              track.scrollTo({ left: maxScroll, behavior: 'smooth' });
            } else {
              track.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
            }
          }
        }
      }
      window.scrollGallery = scrollGallery;
    </script>
  </body>
</html>


