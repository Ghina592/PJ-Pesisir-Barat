<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Detail Informasi - Pesisir Barat</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
      <link rel="stylesheet" href="header.css" />
    <link rel="stylesheet" href="index.css" />
        <link rel="stylesheet" href="footer.css" />
    <meta name="theme-color" content="#e9caa2" />
  </head>
  <body>
    <header class="hero">
      <div class="hero-overlay"></div>

      <div class="hero-top container">
        <div class="hero-content">
          <h1 class="hero-title">SELAMAT DATANG DI WEBSITE RESMI</h1>
          <h2 class="hero-subtitle">KABUPATEN PESISIR BARAT</h2>
        </div>

        <div class="hero-bottom">
          <div class="official left-official">
            <img
              src="assets/img/bupati.png"
              alt="bupati"
              class="official-photo"
            />
          </div>

          <div class="hero-center">
            <img src="assets/img/logo.png" alt="logo" class="logo-center" onclick="window.location.href='index.html'" style="cursor: pointer;" />
            <h1>NEGERI PARA SAI BATIN DAN ULAMA</h1>

            <div class="search">
              <input type="search" placeholder="Search..." id="searchInput" />
              <button id="searchBtn" aria-label="search">🔍</button>
            </div>
          </div>

          <div class="official right-official">
            <img
              src="assets/img/wakil.png"
              alt="wakil"
              class="official-photo"
            />
          </div>
        </div>
      </div>

      <div class="hamburger" id="hamburgerBtn">☰</div>

      <nav class="main-nav">
        <div class="nav-item" onclick="window.location.href='index.html'">BERANDA</div>
        <div class="nav-item" onclick="window.location.href='profil.html'">PROFIL</div>
        <div class="nav-item" onclick="window.location.href='pariwisata.html'">PARIWISATA</div>
      </nav>
    </header>

    <main class="container">
      <!-- Breadcrumb -->
      <nav class="breadcrumb">
        <a href="index.html">BERANDA</a> &gt; 
        <a href="informasi.html">INFORMASI</a> &gt; 
        <span id="breadcrumbTitle">Loading...</span>
      </nav>

      <div class="page-layout">
        <!-- Main Content -->
        <article class="main-content detail-article">
          <span id="infoCategory" class="article-category"></span>
          <h1 id="infoTitle" class="article-title">Loading...</h1>
          
          <div class="article-meta">
            <span><img src="assets/icon-date.png" alt="" /> <span id="infoDate"></span></span>
          </div>

          <div id="infoContent" class="article-content">
            <!-- Content will be loaded here -->
          </div>

          <div id="infoAttachment" class="info-attachment" style="display:none;">
            <h3>Lampiran</h3>
            <a href="#" id="attachmentLink" class="btn btn-secondary" target="_blank">Download Lampiran</a>
          </div>

          <div class="article-actions">
            <button class="btn btn-secondary" onclick="shareInfo()">Bagikan Informasi</button>
          </div>
        </article>

        <!-- Sidebar -->
        <aside class="sidebar">
          <div class="sidebar-card">
            <h3>INFORMASI LAINNYA</h3>
            <ul id="otherInfo" class="sidebar-list">
              <!-- Other info will be loaded here -->
            </ul>
          </div>
        </aside>
      </div>
    </main>

        <!-- FOOTER -->
    <div id="footer-placeholder"></div>

    <!-- Scripts -->
    <script src="script.js"></script>
    <script src="footer-template.js"></script>

    <script src="script.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', async function() {
        const id = getUrlParam('id');
        if (!id) {
          window.location.href = 'informasi.html';
          return;
        }

        const info = await DataManager.getById('informasi', id);
        if (!info) {
          document.querySelector('.detail-article').innerHTML = '<p>Informasi tidak ditemukan.</p>';
          return;
        }

        // Populate info
        document.getElementById('infoCategory').textContent = info.kategori?.toUpperCase() || 'UMUM';
        document.getElementById('infoTitle').textContent = info.judul;
        updateBreadcrumbTitle(info.judul);
        document.getElementById('infoDate').textContent = formatDateLong(info.tanggal);
        
        // Format content
        const content = info.konten.split('\n\n').map(p => `<p>${p.replace(/\n/g, '<br>')}</p>`).join('');
        document.getElementById('infoContent').innerHTML = content;

        // Attachment
        if (info.lampiran) {
          document.getElementById('infoAttachment').style.display = 'block';
          document.getElementById('attachmentLink').href = info.lampiran;
        }

        // Update page title
        document.title = `${info.judul} - Pesisir Barat`;

        // Load other informasi
        const allInfo = await DataManager.load('informasi');
        const others = allInfo.filter(i => i.id !== id).slice(0, 5);
        const othersList = document.getElementById('otherInfo');
        if (othersList) {
          othersList.innerHTML = others.map(i => `
            <li><a href="detail-informasi.html?id=${i.id}">${i.judul}</a></li>
          `).join('');
        }
      });

      // Share function (unified)
      function shareInfo() {
        if (navigator.share) {
          navigator.share({
            title: document.getElementById('infoTitle').textContent,
            url: window.location.href
          });
        } else {
          window.open(`https://wa.me/?text=${encodeURIComponent(document.getElementById('infoTitle').textContent + ' - ' + window.location.href)}`, '_blank');
        }
      }
    </script>
  </body>
</html>


